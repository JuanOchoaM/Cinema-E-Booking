<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signup</title>
    <link rel="stylesheet" type="text/css"
          href="/css/signup.css"
          th:href="@{/css/signup.css}"  />
</head>
<body>
  <div id="nav-ctr">
    <nav class="top-nav">
      <a class="nav-link"><a th:href="@{/}">Home</a></a>
    </nav>
  </div>
  <div class="page-ctr">
    <div>
      <h2>Customer Registration - Sign Up</h2>
    </div>
    <form th:action="@{/process_register}" th:object="${user}"
    method="post" style="max-width: 600px; margin: 0 auto;">
    <div class="container">
      <div class="form-group row">
          <label class="col-4 col-form-label">E-mail: </label>
          <div class="col-8">
              <input type="email" th:field="*{email}" class="form-control" required />
          </div>
      </div>
       
      <div class="form-group row">
          <label class="col-4 col-form-label">Password: </label>
          <div class="col-8">
              <input type="password" th:field="*{password}" class="form-control"
                      required minlength="6" maxlength="20"/>
          </div>
      </div>
       
      <div class="form-group row">
          <label class="col-4 col-form-label">First Name: </label>
          <div class="col-8">
              <input type="text" th:field="*{firstName}" class="form-control"
                      required minlength="2" maxlength="20"/>
          </div>
      </div>
       
      <div class="form-group row">
          <label class="col-4 col-form-label">Last Name: </label>
          <div class="col-8">
              <input type="text" th:field="*{lastName}" class="form-control"
                      required minlength="2" maxlength="20" />
          </div>
      </div>

      <div class="form-group row">
        <label class="col-4 col-form-label">Home Address (Optional): </label>
        <div class="col-8">
            <input type="text" th:field="*{address.streetAddress}" class="form-control"
                     minlength="2" maxlength="255" />
        </div>
      </div>

      <div class="form-group row">
        <label class="col-4 col-form-label">Apartment/Suite Number (Optional): </label>
        <div class="col-8">
            <input type="text" th:field="*{address.apartmentNumber}" class="form-control"
                     minlength="2" maxlength="255" />
        </div>
      </div>

      <div class="form-group row">
        <label class="col-4 col-form-label">City (Optional): </label>
        <div class="col-8">
            <input type="text" th:field="*{address.cityName}" class="form-control"
                   minlength="2" maxlength="255" />
        </div>
      </div>

      <div class="form-group row">
        <label class="col-4 col-form-label">State Code (Optional): </label>
        <div class="col-8">
            <select th:field="*{address.stateCode}">
              <option th:each="code : ${T(com.spring.project.users.userinfo.StateCode).values()}"
                      th:value="${code}"
                      th:text="${code}">
              </option>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-4 col-form-label">Zip Code (Optional): </label>
        <div class="col-8">
            <input type="number" th:field="*{address.zipCode}" class="form-control"
                     minlength="2" maxlength="5" />
        </div>
      </div>

            <div id="creditCardContainer">
              <!-- Credit card fields will be added here -->
            </div>
            <button type="button" id="addCreditCardButton">Add Credit Card</button>
            <div>
              <input type="checkbox" th:field="*{subscription}" id="agreeCheckbox" name="agreeCheckbox">
              <label for="agreeCheckBox">subscribe to promotions</label>
            </div>
            <div>
              <button type="submit" class="btn btn-primary">Sign Up</button>
          </div>
        </form>
      </div>
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const creditCardForm = document.getElementById("creditCardForm");
          const creditCardContainer = document.getElementById("creditCardContainer");
          const addCreditCardButton = document.getElementById("addCreditCardButton");
    
          let creditCardCount = 0;
    
          addCreditCardButton.addEventListener("click", function() {
            if (creditCardCount < 3) { // Limit to 3 credit cards
              const creditCardFields = document.createElement("div");
              creditCardFields.classList.add("credit-card-info");
              creditCardFields.dataset.card = creditCardCount + 1;
    
              creditCardFields.innerHTML = `
                <div>
                  <label for="ccn${creditCardCount + 1}">Card Number:</label>
                  <input id="ccn${creditCardCount + 1}" 
                    type="tel" 
                    inputmode="numeric" 
                    pattern="[0-9\s]{13,19}" 
                    autocomplete="cc-number" maxlength="19" 
                    placeholder="xxxx xxxx xxxx xxxx" 
                    name="cardNumber${creditCardCount + 1}" 
                    required>
                </div>
                <div>
                  <label for="expiryDate${creditCardCount + 1}">Expiry Date:</label>
                  <input type="date" id="expiryDate${creditCardCount + 1}" name="expiryDate${creditCardCount + 1}" required>
                </div>
                <div>
                  <label for="cvv${creditCardCount + 1}">CVV:</label>
                    
                  <input type="text" id="cvv${creditCardCount + 1}" 
                    type="tel" 
                    inputmode="numeric" 
                    pattern="[0-9\s]{3,4}" 
                    autocomplete="cc-number" maxlength="4" 
                    placeholder="xxxx" 
                    name="cvv${creditCardCount + 1}" 
                    required>
                </div>
                <div>
                  <button type="button" class="removeCreditCardButton" data-card="${creditCardCount + 1}">Remove</button>
                </div>
              `;
              creditCardContainer.appendChild(creditCardFields);
              creditCardCount++;
            } else {
              alert("You can only add up to 3 credit cards.");
            }
          });
    
          creditCardContainer.addEventListener("click", function(event) {
            if (event.target.classList.contains("removeCreditCardButton")) {
              const cardToRemove = event.target.getAttribute("data-card");
              const cardToRemoveElement = document.querySelector(`.credit-card-info[data-card="${cardToRemove}"]`);
              creditCardContainer.removeChild(cardToRemoveElement);
              creditCardCount--;
            }
          });
    
          creditCardForm.addEventListener("submit", function(event) {
            // Perform form submission logic here
            // This is just a placeholder
            event.preventDefault();
            console.log("Form submitted!");
          });
        });
      </script>
</div>
</body>
</html>

