<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>Search Results</title>
    <link rel="stylesheet" type="text/css"
          href="/css/UserTopNav.css"
          th:href="@{/css/UserTopNav.css}"  />
    <link rel="stylesheet"
          href="/css/homepage.css"
          th:href="@{/css/homepage.css}"
    />
</head>
<body>
<div id="nav-ctr">
    <nav class="top-nav">
        <a class="nav-link" th:href="@{/}">Home</a>
        <div class="nav-link" sec:authorize="!(isAuthenticated)">
            <a class="nav-link" th:href="@{/login}">Login</a>
        </div>
        <div class="nav-link" sec:authorize="!(isAuthenticated)">
            <a class="nav-link" th:href="@{/signup}">Register</a>
        </div>
        <div class="nav-link" sec:authorize="isAuthenticated">
            <a class="nav-link" th:href="@{/profile}">Profile</a>
        </div>
        <div class="nav-link" sec:authorize="hasRole('ROLE_ADMIN')">
            <a class="nav-link" th:href="@{/admin/}">Admin</a>
        </div>
        <div class="search-ctr">
            <form id="search-form"
                  th:action="@{/search}"
                  method="get">
                <label for="search-box" id="search-label">Search:</label>
                <input type="search" id="search-box" name="keyword"/>
                <button id="search-button" type="submit" value="Search">Go</button>
            </form>
        </div>
        <div sec:authorize="isAuthenticated">
            <p class="nav-link">
                Welcome <b><span sec:authentication="principal.fullName"></span></b>
            </p>
        </div>
        <div sec:authorize="isAuthenticated">
            <form th:action="@{/logout}" method="post">
                <input class="logout-button" type="submit" value="Sign Out" />
            </form>
        </div>
        <div id="ns-filter-ctr">
            <label id="now-showing-label" for="now_showing_check">Now Showing</label>
            <input type="checkbox" id="now-showing-check" name="now-showing-check" />
        </div>
        <div id="cs-filter-ctr">
            <label id="coming-soon-label" for="coming-soon-check">Coming Soon</label>
            <input type="checkbox" id="coming-soon-check" name="coming-soon-check" />
        </div>
        <div id="date-filter-ctr">
            <label id="date-filter-label" for="date-filter">Date</label>
            <input type="date" id="date-filter" name="date-filter" />
        </div>
    </nav>
</div>
<h2 class="results-header">[[${keyword}]]</h2>
<h1 class="now-showing-header">Now Showing</h1>
    <div class="movie-overview">
        <div class="movie-ctr" th:each="movie : ${searchResult}" th:if="${movie.nowPlaying.equals('Now Showing')}">
            <a class="movie-title" th:text="${movie.movieTitle}" />
            <iframe width="530" height="365"
                    class="trailer-video"
                    th:src="${movie.trailerVideo}"
                    title="YouTube video player"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;
                        web-share" allowfullscreen>
            </iframe>
            <div class="rating-ctr">
                <p class="rating-text" th:text="${movie.rating}" />
            </div>
            <div class="details-link-ctr">
                <p class="details-link" th:text="${movie.synop}"></p>
            </div>
            <div class="book-tickets-btn-ctr">
                <button class="book-tickets-btn">
                    <a th:href="@{/select-show/{id}(id=${movie.id})}">
                        Book
                    </a>
                </button>
            </div>
        </div>
    </div>
    <h1 class="now-showing-header">Coming Soon</h1>
    <div class="movie-overview">
        <div class="movie-ctr" th:each="movie : ${searchResult}" th:if="${movie.nowPlaying.equals('Coming Soon')}">
            <a class="movie-title" th:text="${movie.movieTitle}" />
            <iframe width="530" height="365"
                    class="trailer-video"
                    th:src="${movie.trailerVideo}"
                    title="YouTube video player"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;
                        web-share" allowfullscreen>
            </iframe>
            <div class="rating-ctr">
                <p class="rating-text" th:text="${movie.rating}" />
            </div>
            <div class="details-link-ctr">
                <p class="details-link" th:text="${movie.synop}"></p>
            </div>
            <div class="book-tickets-btn-ctr">
                <button class="book-tickets-btn">
                    <a th:href="@{/select-show/{id}(id=${movie.id})}">
                        Book
                    </a>
                </button>
            </div>
        </div>
    </div>
</body>
</html>